## 2. URL과 리소스

- URL(Uniform Resource Locator): 인터넷의 리소스를 가리키는 표준 이름. 전자정보 일부를 가리키고 그것이 어디에 있고 어떻게 접근할 수 있는지 알려준다.

#### 2.1 인터넷의 리소스 탐색하기

- URL
  - 브라우저가 정보를 찾는데 필요한 리소스의 위치
  - 통합 자원 식별자(Uniform Resource Identifier) 혹은 URI라고 불리는 더 일반화된 부류의 부분집합
  - URN은 현재 그 리소스가 어디에 존재하든 상관없이 그 이름만으로 리소스를 식별하는데 비해 URL은 리소스가 어디 있는지 설명해서 리소스를 식별한다.
  - HTTP 명세에서는 URI를 더 일반화된 개념의 리소스 식별자로 사용한다. 하지만 실제로 HTTP 애플리케이션은 URL을 URI의 한 부분으로 취급한다.

1. URL 문법

   - URL로 인터넷상의 모든 리소스를 찾을 수 있지만, 그 리소스들은 다른 스킴(HTTP, FTP, SMTP)을 통해 접근할 수 있으며, URL 문법은 스킴에 따라 달라진다.

   - ```
     <스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
     ```

     - 가장 중요한 컴포넌트: 스킴, 호스트, 경로
     - 스킴: 리소스를 가져오려면 어떤 프로토콜을 사용하여 서버에 접근해야 하는지 가리킨다. (기본값 없음)
     - 사용자 이름: 몇몇 스킴은 리소스에 접근을 하기 위해 사용자 이름을 필요로 한다. (기본값 anonymous)
     - 비밀번호: 사용자의 비밀번호를 가리키며, 사용자 이름에 콜론(:)으로 이어서 기술한다. (기본값 <이메일 주소>)
     - 호스트: 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소. (기본값 없음)
     - 포트: 리소스를 호스팅하는 서버가 열어놓은 포트번호. 많은 스킴이 기본 포트를 가지고 있다. HTTP의 기본 포트는 80. (기본값 스킴에 따라 다름)
     - 경로: 이전 컴포넌트와 빗금(/)으로 구분되어 있으며, 서버 내 리소스가 서버 어디에 있는지를 가리킨다. 경로 컴포넌트의 문법은 서버와 스킴에 따라 다르다. (기본값 없음)
     - 파라미터: 특정 스킴들에서 입력 파라미터를 기술하는 용도로 사용한다. 파라미터는 이름/값을 쌍으로 가진다. 파라미터는, 다른 파라미터나 경로의 일부와 세미콜론(;)으로 구분하여 기술하며, 여러 개를 가질 수 있다. (기본값 없음)
     - 질의: 스킴에서 애플리케이션(데이터베이스, 게시판, 검색엔진, 기타 인터넷 게이트웨이)에 파라미터를 전달하는데 쓰인다. 질의 컴포넌트를 작성하는데 쓰이는 공통 포멧은 없다. 이는 URL의 끝에 "?"로 구분한다. (기본값 없음)
     - 프래그먼트: 리소스의 조각이나 일부분을 가리키는 이름이다. URL이 특정 객체를 가리킬 경우에 프래그먼트 필드는 서버에 전달되지 않는다. 이는 클라이언트에서만 사용한다. URL의 끝에서 "#" 문자로 구분한다. (기본값 없음)

   1. 스킴
      - 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보. URL을 해석하는 애플리케이션이 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려준다.
      - 알파벳으로 시작해야 하고 URL의 나머지 부분들과 첫 번째 ':' 문자로 구분한다.
      - 대소문자를 가리지 않으므로 HTTP와 http는 같다.
   2. 호스트와 포트
      - 애플리케이션이 인터넷에 있는 리소스를 찾으려면, 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알아야 한다. URL의 호스트와 포트 컴포넌트는 그 두 가지 정보를 제공해준다.
      - 호스트 컴포넌트는 접근하고자 하는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다. 해당 값은 호스트 명이나 IP 주소로 제공한다.
        - www.joes-hardware.com
        - 161.58.228.45
      - 포트 컴포넌트는 서버가 열어놓은 네트워크 포트를 가리킨다. 내부적으로 TCP 프로토콜을 사용하는 HTTP는 기본 포트로 80을 사용한다.
   3. 사용자 이름과 비밀번호
      - 많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.
      - 사용자 이름과 비밀번호 값이 삽입되어 있지 않을 경우 기본 사용자 이름과 비밀번호 값을 넣어놓을 것이다.
        - 사용자 이름: anonymous
        - 비밀번호: 브라우저마다 상이, 인터넷 익스플로러 IEUser, 크롬 chrome@example.com
   4. 경로
      - 리소스가 서버의 어디에 있는지 알려준다. 계층적 파일 시스템 경로와 유사한 구조를 갖는다.
      - '/' 문자를 기준으로 경로조각으로 나뉜다. 각 경로조각은 자체만의 파라미터 컴포넌트를 가질 수 있다.
   5. 파라미터
      - 많은 스킴이 객체에 대한 호스트 및 경로 정보 만으로는 리소스를 찾지 못한다. 서버가 어떤 포트를 열어놓고 있는지, 리소스에 접근하기 위해 사용자 이름과 비밀번호를 명시했는지 여부 외에도 많은 프로토콜이 더 많은 정보를 요구한다.
      - URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요하다. 프로토콜 파라미터가 없으면, 다른 한편에 있는 서버는 그 요청을 잘못 처리하거나 처리를 하지 않을 것이다.
      - 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다. 이 컴포넌트는 이름/값 쌍의 리스트로 URL 나머지 부분들로부터 ';' 문자로 구분하여 URL에 기술한다.이를 통해 애플리케이션이 리소스에 접근하는데 필요한 어떤 추가 정보든 전달할 수 있다.
   6. 질의 문자열
      - DB와 같은 서비스에서 요청받을 리소스 형식의 범위를 좁히기 위해 사용
      - 게이트웨이를 가리키는 URL의 경로 컴포넌트와 함께 전달
        - 게이트웨이: 다른 애플리케이션에 접근하려고 할 때 거치는 통로
      - 편의상 많은 게이트웨이가 '&'로 나뉜 '이름=값' 쌍 형식의 질의 문자열을 원한다.
      - `item=1234&color=blue`
   7. 프래그먼트
      - 리소스의 특정 부분을 가리키기 위해 사용
      - \# 문자에 이어서
      - 일반적으로 HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에, 클라이언트는 서버에 프래그먼트를 전달하지 않는다. 브라우저가 서버로부터 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 보고자하는 리소스의 일부를 보여준다.

#### 2.2 단축 URL

1. 상대 URL

   - 절대 URL은 리소스에 접근하는데 필요한 모든 정보를 가지고 있지만, 상대 URL은 그렇지 않다.
   - 기저(base)라고 하는 다른 URL을 사용해 리소스에 접근하는데 필요한 모든 정보를 얻는다.
   - URL을 짧게 표기하는 방식
   - 프래그먼트이거나 URL 일부
   - 리소스 집합(HTML 페이지 같은)을 쉽게 변경할 수 있다.
   - 문서 집합의 위치를 변경하더라도, 새로운 기저 URL에 의해 해석될 것이기 때문에 위치를 변경하더라도 잘 동작할 것이다.

   - URL을 처리하는 브라우저 같은 애플리케이션은 상대 URL과 절대 URL 간에 상호 변환을 할 수 있어야 한다.
     - *기저 URL*
       - 상대 URL의 기준
       - 가져오는 방법
         - 리소스에서 명시적으로 제공
         - 리소스를 포함하고 있는 기저 URL: 상대 URL이 기저 URL이 명시되지 않은 리소스에 포함된 경우, 해당 리소스의 URL을 기저 URL로 쓸 수 있다.
         - 기저 URL이 없는 경우: 절대 URL만으로 이루어져 있거나 불완전하거나 깨진 URL일 수 있다.
     - *상대 참조 해석하기*
       - URL 분해하기, URL 파싱
       - 알고리즘을 통해 상대 URL을 절대 URL로 변환할 수 있다. (P. 39 참조)

2. URL 확장