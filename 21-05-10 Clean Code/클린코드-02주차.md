# 3. 함수

> 의도를 분명히 표현하는 함수를 어떻게 구현할 수 있을까? 함수에 어떤 속성을 부여해야 처음 읽는 사람이 프로그램 내부를 직관적으로 파악할 수 있을까?



1. 작게 만들어라

   - 가로 150줄을 넘어서는 안 된다.
   - 100줄을 넘어서는 안 된다. 20줄도 길다.

   1. 블록과 들여쓰기
      - if / else / while 문 등에 들어가는 블록은 한 줄이어야 한다. → 중첩 구조가 생길만큼 함수가 커져서는 안 된다.
      - 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서면 안 된다.

2. 한 가지만 해라

   - **함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.**
   - 우리가 함수를 만드는 이유는 큰 개념을 (함수 이름을) 다음 추상화 수준에서 여러 단계로 나눠 수행하기 위해서
   - 함수가 한 가지를 하는지 판단하는 방법
     - 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.
     - 다른 표현이 아니라 의미 있는 이름으로 다른 함수를 추출할 수 있따면 그 함수는 여러 작업을 하는 셈이다.

3. 함수 당 추상화 수준은 하나로

   - 함수 내 모든 문장의 추상화 수준이 동일해야 한다.

4. 내려가기 규칙: 위에서 아래로 코드 읽기

   - 위에서 아래로 프로그램을 읽으면 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.

5. Switch문

   - 다형성(polymorphism)을 이용해 각 switch문을 저차원 클래스에 숨기고 절대로 반복하지 않을 수 있다.

6. 서술적인 이름을 사용하라

   - 길고 서술적인 이름이 짧고 어려운 이름보다 좋다.
   - 길고 서술적인 이름이 길고 서술적인 주석보다 좋다.
   - 함수 이름을 정할 때는 여러 단어가 쉽게 읽히는 명명법을 사용한다. 그런 다음, 여러 단어를 사용해 함수 기능을 잘 표현하는 이름을 선택한다.
   - 이름을 붙일 때는 일관성이 있어야 한다.

7. 함수 인수

   - 함수에서 이상적인 인수 개수는 0개
   - 3개는 가능한 피하는 편이 좋고, 4개 이상은 특별한 이유가 있어도 사용하면 안 된다.
   - 인수 객체: 인수가 2-3개 필요하다면 일부를 독자적인 클래스 변수로 선언할 수 있다.

8. 부수 효과를 일으키지 마라

   - 시간적인 결합이나 순서 종속성을 초래한다.

9. 오류 코드보다 예외를 사용하라

   - 오류 처리 코드가 원래 코드에서 분리되므로 코드가 깔끔해진다.
   - try/catch 블록은 별도 함수로 뽑아내는 편이 좋다.
   - 오류 처리도 한 가지 작업이다.

10. 반복하지 마라

11. 구조적 프로그래밍

    - 모든 함수와 함수 내 모든 블록에 입구와 출구가 하나만 존재해야 한다. 즉, 함수는 return 문이 하나여야 한다.
    - 함수가 작다면 이 규칙은 별 이익을 제공하지 못한다.



> 진짜 목표는 시스템이라는 이야기를 풀어가는 데 있다. 작성하는 함수가 분명하고 정확한 언어로 깔끔하게 같이 맞아떨어져야 이야기를 풀어가기가 쉬워진다.



# 4. 주석

- 코드를 깔끔하게 정리하고 표현력을 강화하는 방향으로, 그래서 애초에 주석이 필요 없는 방향으로
- 주석을 가능한 줄이도록 꾸준히 노력해야 한다.

1. 주석은 나쁜 코드를 보완하지 못한다
   - 코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문이다.
2. 코드로 의도를 표현하라
   - 많은 경우 주석으로 달려는 설명을 함수로 만들어 표현해도 충분하다.
3. 좋은 주석
   - 정말로 좋은 주석은, 주석을 달지 않은 방법을 찾아낸 주석
   - 법적인 주석: 소스 파일 첫머리에 주석으로 들어가는 저작권 정보와 소유권 정보
   - 정보를 제공하는 주석
   - 의도를 설명하는 주석
   - 의미를 명료하게 밝히는 주석: 인수나 반환값 자체를 명확하게 만들면 더 좋겠지만, 인수나 반환값이 표준 라이브러리나 변경하지 못하는 코드에 속하는 경우
   - 결과를 경고하는 주석
   - TODO 주석: 필요하다 여기지만 당장 구현하기 어려운 업무를 기술
   - 중요성을 강조하는 주석
   - 공개 API에서 Javadocs
4. 나쁜 주석
   - 주절거리는 주석
   - 같은 이야기를 중복하는 주석
   - 오해할 여지가 있는 주석
   - 의무적으로 다는 주석
   - 이력을 기록하는 주석
   - 있으나 마나 한 주석: 너무 당연한 사실을 언급하며 새로운 정보를 제공하지 못하는 주석
   - 무서운 잡음: 문서를 제공해야 한다는 잘못된 욕심을 부리지 마라
   - 함수나 변수로 표현할 수 있다면 주석을 달지 마라
   - 위치를 표시하는 주석
   - 닫는 괄호에 다는 주석: 닫는 괄호에 주석을 달아야겠다는 생각이 든다면 대신에 함수를 줄이려 시도하자
   - 공로를 돌리거나 저자를 표시하는 주석
   - 주석으로 처리한 코드
   - HTML 주석
   - 전역 정보: 코드 일부에 주석을 달면서 시스템의 전반적인 정보를 기술하지 마라
   - 너무 많은 정보
   - 모호한 관계
   - 함수 헤더: 짧고 한 가지만 수행하며 이름을 잘 붙인 함수가 주석으로 헤더를 추가한 함수보다 훨씬 좋다.
   - 비공개 코드에서 Javadocs



