# 6. 사람은 실수하기 마련이다

> 불가피한 상호아에 대처하기 - 코드 속 오류 상황



### 6.1 오류가 시작되는 곳

- 오류는 발생 전에 미리 **알고** 있다는 점에서 불완전한 프로그램에서 비롯되는 버그와는 엄연히 다르다.
- 이러한 오류 상황을 처리하는 코드를 작성해 놓지 않으면 언젠가 반드시 **버그**가 발생하고 프로그램이 의도대로 동작하지 못하는 상황이 온다. 하지만 오류가 드물게 발생하면 버그를 감지하기 상당히 힘들다.
- 오류의 원인
  1. 사용자 오류
  2. 프로그래머 오류
  3. 이례적 상황
- 누군가는 오류가 발생했음을 알리고 행동해야 한다.
- 프로그램 실행을 제어하기 위한 방법
  - 무언가 잘못됐을 때 오류를 일으킨다.
  - 발생 가능한 오류 보고를 전부 감지한다.
  - 오류 보고를 적절히 처리한다.
  - 처리할 수 없는 오류는 전파한다.



### 6.2 오류 보고 메커니즘

- 메커니즘에 따라 **오류 지역성**(locality of error)이 달라진다.
  - 발생하자마자 발견되는 오류는 **시간**(time) 지역적 오류
  - 실제 오류가 발생한 위치와 아주 가까이에서(혹은 바로 거기서) 발견되는 오류는 **공간**(space) 지역적 오류다.

#### 1. 보고하지 않기

- 가장 간단한 오류 보고 메커니즘은 **신경 쓰지 않기**(don't botter)
- 오류 상황을 절대 무시하지 말자. 문제를 처리할 방법을 모르겠으면 호출한 코드에 다시 실패를 알리자. 오류를 숨기며 요행을 바라지 말자.

#### 2. 값 반환하기

- 함수에서 성공/실패 값을 반환하기
- 가능한 종료 상태를 모두 나열하고 대응하는 원인 코드(reason code) 반환하기

#### 3. 오류 상태 변수

- 최대한 사용하지 말 것

#### 4. 예외

- 예외 처리 후 연산 모델
  - 종료 모델(termination model): 예외를 잡았던 핸들러부터 실행을 계속한다.
  - 재개 모델(resumption model): 예외가 발생했던 지점부터 실행을 재개한다.
- **예외 안전**(exception-safe) 코드를 작성하기 위해 각별히 신경 써야 한다.

#### 5. 시그널

- 