### 07. 액션 태그(Action Tag)

### 7.1 액션 태그란?

- JSP의 표준 태그
- 페이지 사이에서 이동을 제어하거나 자바빈을 생성할 때 주로 사용
- 특별한 선언 없이 `<jsp:태그명 />` 형태로 사용
- 특징
  - XML 문법을 따름
  - 반드시 종료 태그를 사용해야 함
  - 액션 태그 사이에 주석을 사용하면 에러가 발생
  - 액션 태그에 속성을 부여할 때는 `<%= %>`을 사용할 수 있다.
- 용도에 따른 분류
  - `<jsp:include>`: 외부 파일을 현재 파일에 포함시킨다.
  - `<jsp:forward>`: 다른 페이지로 요청을 넘긴다.
  - `<jsp:useBean>`, `<jsp:setProperty>`, `<jsp:getProperty>`: 자바빈즈를 생성하고 값을 설정/추출한다.
  - `<jsp:param>` 다른 페이지로 매개변수를 전달한다. `<jsp:include>`, `<jsp:forward>` 액션 태그와 함께 사용한다.



### 7.2 `<jsp:include>`

- 외부 JSP 파일을 포함시키는 기능

1. include 지시어와 `<jsp:include>` 액션 태그

   |              | 지시어                                              | 액션 태그                                                    |
   | ------------ | --------------------------------------------------- | ------------------------------------------------------------ |
   | 형식         | <%@ include file="파일 경로" %>                     | <jsp:include page="파일 경로" />                             |
   | 표현식       | 표현식 사용 불가                                    | 표현식 사용 가능                                             |
   | 포함 방식    | 페이지 자체를 현재 페이지에 포함시킨 후 컴파일 진행 | 실행의 흐름을 포함시킬 페이지로 이동시킨 후 실행한 결과를 현재 페이지에 포함시킴 |
   | 변수         | 포함시킨 파일에서 생성한 변수 사용 가능             | 포함시킨 파일에서 생성한 변수 사용 불가                      |
   | page 영역    | 공유됨                                              | 공유되지 않음                                                |
   | request 영역 | 공유됨                                              | 공유됨                                                       |

2. 포함될 외부 파일 준비

3. 포함 방식에 따른 차이 확인



### 7.3 `<jsp:forward>`

- 현재 페이지에 들어온 요청을 다음 페이지로 보내는 기능
- 액션 태그를 만나기까지의 모든 출력을 제거하고 포워드할 페이지로 요청을 전달
- 포워드는 버퍼와 밀접하기 때문에, 해당 페이지 지시어 부분에 buffer="none"으로 설정해 버퍼를 사용하지 않도록 했다면 포워드는 사용할 수 없다.
- 포워드는 다음 페이지로 요청을 전달하는 것이 목적이므로 이동된 페이지와 request 영역을 공유한다.
- URL이 변경되지 않는다.



### 7.4 `<jsp:useBean>`, `<jsp:setProperty>`, `<jsp:getProperty>`

- `<jsp:useBean>`
  - 자바빈즈(JavaBeans)를 생성하거나 설정할 때 사용
    - 자바빈즈: 데이터를 저장하기 위한 멤버 변수(속성)와 게터/세터 메서드로만 이루어진 클래스

1. 자바빈즈 생성
   - `<jsp:useBean id="자바빈즈 이름"  class="사용할 패키지와 클래스명" scope="저장될 영역" />`
     - id: 자바빈즈 객체의 이름을 지정, 같은 id로 이미 생성된 객체가 있다면 해당 객체를 사용하고, 아직 없다면 새로 생성
     - class: 사용하려는 자바빈즈 객체의 실제 패키지명과 클래스명을 지정
     - scope: 자바빈즈가 저장될 내장 객체 영역을 지정, 생략한다면 기본값인 page 영역이 지정
   - 자바빈즈를 생성할 때는 기본 생성자를 호출하므로, 해당 클래스에 기본 생성자가 없다면 에러가 발생한다.
2. 멤버 변수 값 설정/추출
   - 설정
     - `<jsp:setProperty name="자바빈즈 이름" property="속성명(멤버 변수)" value="설정할 값" />`
       - name: `<jsp:useBean>`의 id 속성에 지정한 자바빈즈의 이름을 지정
       - property: 자바빈즈의 멤버 변수명을 지정, 이름을 명시하는 대신 property='*'라고 쓰면 form의 하위 요소와 일치하는 자바빈즈의 모든 속성에 사용자가 전송한 값이 설정됨. 이 때는 value 속성을 생략할 수 있다.
       - value: 멤버 변수에 설정할 값을 지정한다.
   - 추출
     - `<jsp:getProperty name="자바빈즈 이름" property="속성명(멤버 변수)" />`

3. 와일드카드로 폼값 한 번에 설정하기
   - property 속성에 와일드카드(*)를 사용하면 `<form>` 태그를 통해 전송되는 모든 폼값을 한 번에 자바빈즈에 입력할 수 있다.
4. 한글 인코딩 문제 해결
   - web.xml에 필터 추가



### 7.5 `<jsp:param>`

- `<jsp:include>`나 `<jsp:forward>`를 사용할 때 다른 페이지에 값을 전달해주는 액션 태그
- 전달할 수 있는 값은 String 뿐이고, 다른 타입 객체를 전다할 때는 내장 객체의 영역을 이용해야 함

1. 포워드되는 페이지로 매개변수 전달하기
2. 인클루드되는 페이지로 매개변수 전달하기