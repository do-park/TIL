# 4. 무엇을 작성해야 하나?

> "자체 문서화" 코드 작성 기법



- 훌륭한 코드를 만든다는 것은 **문서화가 잘 된**(well-documented) 코드를 만드는 것이다.



### 4.1 자체 문서화 코드

- 코드를 완벽하고 올바르게 설명하는 유일한 문서는 코드 자체다. 그렇다고 반드시 코드가 다른 무엇보다도 가장 뛰어난 설명이라는 뜻은 아니나 보통은 손에 넣을 수 있는 **유일한** 문서다.

- 자체 문서화 코드란 쉽게 읽히는 코드다. 외부 문서에 의지하지 않고도 코드 자체만으로 쉽게 이해가 간다.



### 4.2 자체 문서화 코드 작성 기법

- 주석이 필요 없을 만큼 명확한 코드를 작성해 오히려 적극적으로 주석을 **피해야** 한다.

#### 1. 훌륭한 표현으로 간단한 코드를 작성하자

- 표현(presentation)은 코드 명확성(clarity)에 커다란 영향을 미친다. 신중히 고려해 배치하면 코드 구조를 잘 전달해 함수와 루프, 조건문이 더 명확해진다.
- 코드가 실행되는 '일반적인' 경로를 명확히 하자. 오류 케이스가 일반적인 실행 흐름을 깨서는 안 된다.
- 중첩문을 과도하게 사용하지 말자.
- 프로그램 함수로서 허용할 수 없는 병목이라고 **정확히** 증명하기 전까지는 코드를 **절대** 최적화하지 말자.

#### 2. 의미 있는 이름을 고르자

#### 3. 원자(atomic) 함수로 분해하자

- 함수 하나 당 동작 하나
- 악영향을 끼치지 않더라도 의외의 **부수 효과**(side effect)는 최소화하자.
- 짧게 만들자.

#### 4. 서술적인 타입을 고르자

#### 5. 상수를 명명하자

- 매직 넘버를 쓰지 말자. 대신 잘 명명된 상수를 사용하자.

#### 6. 중요한 코드를 강조하자

- 도움이 되는 방향으로 클래스 내 선언을 정렬하자.

- 꼭 필요하지 않은 정보는 가능한 한 숨기자.
- 중요한 코드는 숨기지 말자.
- 중첩 조건문의 수를 제한하자.

#### 7. 연관된 정보를 한데 모으자

#### 8. 파일 헤더를 제공하자

#### 9. 오류를 적절히 처리하자

- 프로그램의 각 수준마다 오류는 **그 맥락에서** 문제가 정확히 무엇인지 설명해야 한다.

#### 10. 의미 있는 주석을 작성하자.

- 어떻게 해도 코드 명확성을 향상시킬 수 없을 때만 주석을 달자.



### 4.3 실용적 자체 문서화 방법론

- 형편없는 코드는 설명하지 말고 다시 작성하자.

#### 1. 문학적 프로그래밍

- **문학적 프로그래밍**(literate programming)
- 장점
  - 설명서 작성에 중점을 둔다.
  - 설명과 근거를 코드와 함께 작성하다 보니 다른 관점에서 코드를 생각해볼 수 있다.
  - 설명서가 가까이 있어 코드를 변경하며 설명서를 업데이트할 가능성이 크다.
  - 전체 코드 기반에 대해 단 하나의 문서만 존재하도록 보장한다.
  - 소스 주석에서 찾아보기 힘든 항목을 포함시키도록 장려한다. (사용한 알고리즘 설명, 정확성 증명, 디자인 결정의 정당성 등)

- 단점
  - 작성하기 어렵다.
  - 컴파일 단계가 별도로 필요해 작업 속도가 늦다.
  - 설명이 전혀 필요 없는 코드를 설명할 때가 있다.
  - 좋은 프로그래머가 항상 유능한 문학적 프로그래머는 아니다.
  - 코드와 밀접하게 문서화되면 문제가 될 수 있다.

#### 2. 문서화 도구

- 소스 코드에서 특수한 형식의 주석 블록을 뽑아내 문서화를 생성한다.

- 자바독(Javadoc)

- 장점

  - 문학적 프로그래밍과 마찬가지로 설명서를 작성하고 최신 버전을 유지하도록 돕는다.
  - 컴파일 가능한 코드를 만들어야 하는 별도의 단계가 없다.
  - 대규모 수정이라든지 가파른 학습 곡선(learning curve)없이 좀 더 자연스럽다.
  - 문서화 도구는 풍부한 검색과 상호 참조, 코드 개요 작성 기능(feature)를 지원한다.

- 단점

  - API 설명서에서만 유용할 뿐, 내부 코드 문서화에는 전혀 유용하지 않다.
  - 문서화 주석들이 사방에 퍼져 있어 소스 파일만 언뜻 보고서는 내용에 대해 전체적인 윤곽을 잡기 어렵게 된다.

- 휴리스틱

  - 지나치게 많은 텍스트는 피하자.
  - 변수나 매개변수의 쓰임새가 명확하지 않을 때만 설명하되 이름으로 뻔히 알 수 있는 내용은 나열하지 말자.
  - 함수 매개변수 중 어떤 것은 입력에 쓰이고 어떤 것은 출력에 쓰이면 설명으로 명확히 하자.
  - 함수의 사전 혹은 사후 조건, 던질 수 있는 예외, 일체의 부수효과를 설명하자.

  